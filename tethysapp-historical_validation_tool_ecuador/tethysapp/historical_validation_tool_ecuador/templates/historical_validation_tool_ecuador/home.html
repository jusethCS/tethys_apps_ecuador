{% extends "historical_validation_tool_ecuador/app_base.html" %}
{% load static %}
{% load tethys_gizmos %}

{% block import_gizmos %}
    {% import_gizmo_dependency plotly_view %}
{% endblock %}

{% block title %}{{ tethys_app.name }}{% endblock %}

{% block app_icon %}
  {# The path you provided in your app.py is accessible through the tethys_app.icon context variable #}
  <img src="{% if 'http' in tethys_app.icon %}{{ tethys_app.icon }}{% else %}{% static tethys_app.icon %}{% endif %}" />
{% endblock %}

{# The name you provided in your app.py is accessible through the tethys_app.name context variable #}
{% block app_title %}{{ tethys_app.name }}{% endblock %}

{% block app_navigation_items %}
{% endblock %}

{% block header_buttons %}
  <div class="header-button glyphicon-button" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Help">
    <a data-bs-toggle="modal" data-bs-target="#help-modal"><i class="bi bi-question-circle"></i></a>
  </div>
{% endblock %}


{% block app_content %}
  <div id="map-container"></div>
  <script type="text/javascript"> 
      let stations  = "{{ data|safe }}";
  </script>
{% endblock %}



{# Use the after_app_content block for modals #}
{% block after_app_content %}
  <!-- Example Modal -->
  <div class="modal fade" id="help-modal" tabindex="-1" role="dialog" aria-labelledby="help-modal-label">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="help-modal-label">Example Modal</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>You can add custom buttons to the app header using the <code>header_buttons</code> block. Use anchor/link tags for the button and wrap it in a div with the class <code>header-button</code>. For buttons with the gliphyicons, add the <code>glyphicon-button</code> class as well.</p>
          <p>Ever have trouble using a modal in a Tethys app? Use the <code>after_app_content</code> block for modal content to allow them to function properly. See: <a href="https://getbootstrap.com/docs/5.1/components/modal/">Bootstrap Modals</a></p>
          <p>Add tooltips to any element by adding the <code>data-bs-toggle</code>, <code>data-bs-placement</code>, and <code>title</code> attributes to the button. See: <a href="https://getbootstrap.com/docs/5.1/components/tooltips/">Bootstrap Tooltips</a></p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
        </div>
      </div>
    </div>
  </div>

    <!-- Data Station Panel -->
    <div class="modal fade" id="panel-modal" tabindex="-1" role="dialog" aria-labelledby="panel-modal-label">
      <div class="modal-dialog  modal-dialog-centered modal-xl" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <div class="modal-title" id="panel-modal-label">
              <div>
                <img src="{% static 'historical_validation_tool_ecuador/images/logos.png' %}" width="600px">
              </div>
              <div>
                <div class="container">
                  <div class="row">
                    <div class="col">
                      <h5 id="panel-title-custom">Nombre de la estacion</h5>
                    </div>
                  </div>
                  <div class="row" id="panel-station-information">
                    <div class="col">
                      <div class="row-station" id="station-comid-custom"> <b>COMID:</b> &nbsp   </div>
                      <div class="row-station" id="station-river-custom"> <b>RIO:</b> &nbsp   </div>
                      <div class="row-station" id="station-basin-custom"> <b>CUENCA:</b> &nbsp   </div>
                    </div>
                    <div class="col">
                      <div class="row-station" id="station-latitude-custom"> <b>LATITUD:</b> &nbsp   </div>
                      <div class="row-station" id="station-longitude-custom"> <b>LONGITUD:</b> &nbsp   </div>
                      <div class="row-station" id="station-altitude-custom"> <b>ALTITUD:</b> &nbsp   </div>
                    </div>
                    <div class="col">
                      <div class="row-station" id="station-locality1-custom"> <b>PROVINCIA:</b> &nbsp   </div>
                      <div class="row-station" id="station-locality2-custom"> <b>CANTON:</b> &nbsp   </div>
                      <div class="row-station" id="station-locality3-custom"> <b>PARROQUIA:</b> &nbsp   </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
          </div>
          <div id="modal-body-panel-custom" class="modal-body" style="min-width: 100% !important;">
              <ul class="nav nav-tabs" id="panel-tab" role="tablist">
                <li class="nav-item" role="presentation">
                  <button 
                    class="nav-link active" 
                    id="hydrograph-tab" 
                    data-bs-toggle="tab" 
                    data-bs-target="#hydrograph" 
                    type="button" 
                    role="tab" 
                    aria-controls="hydrograph" 
                    aria-selected="true"> Datos históricos </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button 
                    class="nav-link" 
                    id="visual-analisis-tab" 
                    data-bs-toggle="tab" 
                    data-bs-target="#visual-analisis" 
                    type="button" 
                    role="tab" 
                    aria-controls="visual-analisis" 
                    aria-selected="false">Análisis visual</button>
                </li>
                <li class="nav-item" role="presentation">
                  <button 
                    class="nav-link" 
                    id="metrics-tab" 
                    data-bs-toggle="tab"
                    data-bs-target="#metrics" 
                    type="button" 
                    role="tab" 
                    aria-controls="metrics" 
                    aria-selected="false"> Métricas </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button 
                    class="nav-link" 
                    id="forecast-tab" 
                    data-bs-toggle="tab"
                    data-bs-target="#forecast" 
                    type="button" 
                    role="tab" 
                    aria-controls="forecast" 
                    aria-selected="false"> Pronóstico </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button 
                      class="nav-link" 
                      id="corrected-forecast-tab" 
                      data-bs-toggle="tab"
                      data-bs-target="#corrected-forecast" 
                      type="button" 
                      role="tab" 
                      aria-controls="corrected-forecast" 
                      aria-selected="false"> Pronóstico corregido </button>
                </li>
              </ul>
              <div class="tab-content" id="panel-tab-content">
                <div class="tab-pane fade show active" id="hydrograph" role="tabpanel" aria-labelledby="hydrograph-tab">
                  <div class="loading-container" style="height: 350px; padding-top: 12px;"> 
                    <div class="loading"> 
                      <h2>LOADIND DATA</h2>
                        <span></span><span></span><span></span><span></span><span></span><span></span><span></span> 
                    </div>
                  </div>
                </div>
                <div class="tab-pane fade" id="visual-analisis" role="tabpanel" aria-labelledby="visual-analisis-tab">
                  <div class="loading-container" style="height: 350px; padding-top: 12px;">
                    <br> 
                    <div class="loading"> 
                      <h2>LOADIND DATA</h2>
                        <span></span><span></span><span></span><span></span><span></span><span></span><span></span> 
                    </div>
                  </div>
                </div>
                <div class="tab-pane fade" id="metrics" role="tabpanel" aria-labelledby="metrics-tab">
                  <div class="loading-container" style="height: 350px; padding-top: 12px;"> 
                    <div class="loading"> 
                      <h2>LOADIND DATA</h2>
                        <span></span><span></span><span></span><span></span><span></span><span></span><span></span> 
                    </div>
                  </div>
                </div>
                <div class="tab-pane fade" id="forecast" role="tabpanel" aria-labelledby="forecast-tab">
                  <div class="loading-container" style="height: 350px; padding-top: 12px;"> 
                    <div class="loading"> 
                      <h2>LOADIND DATA</h2>
                        <span></span><span></span><span></span><span></span><span></span><span></span><span></span> 
                    </div>
                  </div>
                </div>
                <div class="tab-pane fade" id="corrected-forecast" role="tabpanel" aria-labelledby="corrected-forecast-tab">
                  <div class="loading-container" style="height: 350px; padding-top: 12px;"> 
                    <div class="loading"> 
                      <h2>LOADIND DATA</h2>
                        <span></span><span></span><span></span><span></span><span></span><span></span><span></span> 
                    </div>
                  </div>
                </div>
              </div>
          </div>
        </div>
      </div>
    </div>
{% endblock %}


{% block content_dependent_styles %}
  {{ block.super }}
  <!-- <link href="{% static 'historical_validation_tool_ecuador/libs/leaflet/leaflet.css' %}" rel="stylesheet"/> -->
  <link href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.15.2/css/selectize.default.min.css" rel="stylesheet"/>
  <link href="{% static 'historical_validation_tool_ecuador/css/main.css' %}" rel="stylesheet"/>
  <link href="{% static 'historical_validation_tool_ecuador/css/map.css' %}" rel="stylesheet"/>
  <link href="{% static 'historical_validation_tool_ecuador/css/loader.css' %}" rel="stylesheet"/>
  <link href="{% static 'historical_validation_tool_ecuador/css/panel.css' %}" rel="stylesheet"/>
  <link href="{% static 'historical_validation_tool_ecuador/css/map_control.css' %}" rel="stylesheet"/>
{% endblock %}

{% block scripts %}
  {{ block.super }}
  <script src="{% static 'historical_validation_tool_ecuador/libs/Leaflet/leaflet.js' %}" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.15.2/js/selectize.min.js" type="text/javascript"></script>
  <script src="https://unpkg.com/shpjs@latest/dist/shp.js"></script>
  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
  <!-- <script src="{% static 'historical_validation_tool_ecuador/libs/Leaflet.GeometryUtil/src/leaflet.geometryutil.js' %}"></script>
  <script src="{% static 'historical_validation_tool_ecuador/libs/Leaflet.AlmostOver/src/leaflet.almostover.js' %}"></script> -->
  <script src="{% static 'historical_validation_tool_ecuador/js/utils.js' %}" type="text/javascript"></script>
  <script src="{% static 'historical_validation_tool_ecuador/js/map.js' %}" type="text/javascript"></script>
  <script src="{% static 'historical_validation_tool_ecuador/js/map_control.js' %}" type="text/javascript"></script>
{% endblock %}



